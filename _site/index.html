<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Welcome to URBANopt | urbanopt.github.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Welcome to URBANopt" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documentation for URBANopt" />
<meta property="og:description" content="Documentation for URBANopt" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="urbanopt.github.io" />
<script type="application/ld+json">
{"url":"http://localhost:4000/","headline":"Welcome to URBANopt","name":"urbanopt.github.io","description":"Documentation for URBANopt","@type":"WebSite","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=d3701a3058a092a5cc1c2626da8953bd521e619c">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header >
        <h1>urbanopt.github.io</h1>
        
          <p>Documentation for URBANopt</p>
        
        <p class="view"><a href="https://github.com/urbanopt/urbanopt.github.io">View the Project on GitHub <small></small></a></p>
        <ul>
        
          <li><a href="https://github.com/urbanopt/urbanopt.github.io">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

      <h1 id="welcome-to-urbanopt">Welcome to URBANopt</h1>

<p>URBANopt is a Software Development Kit (SDK) to aid in the design of districts where the interactions between individual buildings, district energy systems, distributed energy resources, and electrical system designs are considered. Including these interactions allows URBANopt to address important questions in low energy, grid aware, future thinking urban districts such as tradeoffs between building height and PV (photovoltaic) production, investments in building efficiency vs distributed renewable generation, coordination of multiple buildings to optimize grid metrics, and performance gains of shared thermal district systems vs conventional single building systems. For example, load diversity between commercial and residential buildings may allow for system time sharing or even complementary heat transfer between buildings using a district thermal energy system.<br />
A high-level introduction to the intent and purpose of URBANopt can be found <a href="https://www.nrel.gov/buildings/urbanopt.html">here</a>.</p>

<p>City planners, utility management, and <strong>(TODO: who else are the intended users?)</strong> can use URBANopt to… <strong>TODO: why would someone use UO</strong></p>

<p>URBANopt is a package of code for software engineers to use. <strong>This is not a standalone program for end users.</strong> This SDK is the engine, the building blocks that can be used to construct a modern, intuitive, performant software package supported by the scientific data provided by the National Renewable Energy Lab (<a href="https://www.nrel.gov">NREL</a>). The goal of URBANopt is to enable a thriving public/private partnership of software companies… <strong>TODO: finish this block</strong></p>

<p>This documentation is intended for power users to operate from the command line</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#mac-installation">Mac installation</a></li>
  <li><a href="#windows-installation">Windows installation</a></li>
  <li><a href="#linux-installation">Linux installation</a></li>
  <li><a href="#basic-usage">Basic usage</a>
    <ul>
      <li><a href="#set-up">Set up</a></li>
      <li><a href="#run-example-project">Run example project</a></li>
      <li><a href="#overview-of-rake-tasks">Overview of rake tasks</a></li>
    </ul>
  </li>
  <li><a href="#adding-your-own-measures">Adding your own measures</a></li>
  <li><a href="#modifying-mapper-classes">Modifying mapper classes</a></li>
  <li><a href="#adding-a-custom-post-processor">Adding a custom post processor</a></li>
  <li><a href="#advanced-usage">Advanced usage</a>
    <ul>
      <li><a href="#building-properties">Building properties</a></li>
      <li><a href="#district-system-properties">District System Properties</a></li>
      <li><a href="#electrical-connector-properties">Electrical Connector Properties</a></li>
      <li><a href="#electrical-junction-properties">Electrical Junction Properties</a></li>
      <li><a href="#region-properties">Region Properties</a></li>
      <li><a href="#site-properties">Site Properties</a></li>
      <li><a href="#thermal-connector-properties">Thermal Connector Properties</a></li>
      <li><a href="#thermal-junction-properties">Thermal Junction Properties</a></li>
    </ul>
  </li>
</ul>

<h2 id="mac-installation">Mac installation</h2>

<p>Install <a href="https://github.com/rbenv/rbenv">Ruby 2.2.4</a><br />
Install Bundler 1.17 by typing this into your command line:</p>

<ul>
  <li><code class="highlighter-rouge">gem install bundler -v 1.17</code></li>
</ul>

<p>Ensure your local <code class="highlighter-rouge">.gemrc</code> file contains:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">:backtrace</span><span class="pi">:</span> <span class="no">false</span>
<span class="s">:bulk_threshold</span><span class="pi">:</span> <span class="s">1000</span>
<span class="s">:sources</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">http://rubygems.org</span>
<span class="s">:update_sources</span><span class="pi">:</span> <span class="no">true</span>
<span class="s">:verbose</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>Install <a href="https://github.com/NREL/OpenStudio/releases/tag/v2.8.1">OpenStudio 2.8.1</a><br />
Add path to Ruby in the new OpenStudio folder by pasting this line to your <code class="highlighter-rouge">.bash_profile</code> or similar file:</p>

<ul>
  <li><code class="highlighter-rouge">export RUBYLIB=/Applications/OpenStudio-2.8.1/Ruby</code></li>
</ul>

<h2 id="windows-installation">Windows installation</h2>

<p>Install Ruby using the <a href="https://rubyinstaller.org/downloads/archives/">RubyInstaller</a> for <a href="https://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.2.4-x64.exe">Ruby 2.2.4 (x64)</a><br />
Install Devkit using the <a href="https://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe">mingw64</a> installer<br />
Install Bundler 1.17 by typing this into your command line</p>

<ul>
  <li><code class="highlighter-rouge">gem install bundler -v 1.17</code></li>
</ul>

<p>Ensure your local <code class="highlighter-rouge">.gemrc</code> file contains:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">:backtrace</span><span class="pi">:</span> <span class="no">false</span>
<span class="s">:bulk_threshold</span><span class="pi">:</span> <span class="s">1000</span>
<span class="s">:sources</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">http://rubygems.org</span>
<span class="s">:update_sources</span><span class="pi">:</span> <span class="no">true</span>
<span class="s">:verbose</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>Install <a href="https://github.com/NREL/OpenStudio/releases/tag/v2.8.1">OpenStudio 2.8.1</a><br />
Create file <code class="highlighter-rouge">C:\ruby-2.2.4-x64-mingw32\lib\ruby\site_ruby\openstudio.rb</code> and point it to your OpenStudio installation by editing the contents. E.g.:</p>

<ul>
  <li><code class="highlighter-rouge">require 'C:\openstudio-2.8.1\Ruby\openstudio.rb'</code></li>
</ul>

<p>Verify your OpenStudio and Ruby configuration by typing this into your command line:</p>

<ul>
  <li><code class="highlighter-rouge">ruby -e "require 'openstudio'" -e "puts OpenStudio::Model::Model.new"</code></li>
</ul>

<h2 id="linux-installation">Linux installation</h2>

<p>Install <a href="https://github.com/NREL/OpenStudio/releases/tag/v2.8.1">OpenStudio 2.8.1</a><br />
Need to manually install <a href="https://www.linuxuprising.com/2018/05/fix-libpng12-0-missing-in-ubuntu-1804.html">libpng12</a><br />
Gdbm libs:</p>

<ul>
  <li><code class="highlighter-rouge">/usr/local/openstudio-2.8.1/bin/openstudio: error while loading shared libraries: libgdbm.so.3: cannot open shared object file: No such file or directory</code></li>
</ul>

<p>and</p>

<ul>
  <li><code class="highlighter-rouge">/usr/local/openstudio-2.8.1/bin/openstudio: error while loading shared libraries: libgdbm_compat.so.3: cannot open shared object file: No such file or directory</code></li>
</ul>

<p>You need to create symlinks to the appropriate version (<code class="highlighter-rouge">libgdbm.so.5</code> and <code class="highlighter-rouge">libgdbm_compat.so.4</code>)</p>

<h2 id="basic-usage">Basic Usage</h2>

<h3 id="set-up">Set up</h3>

<p>Make a Fork of our example project:
<a href="https://github.com/urbanopt/urbanopt-example-geojson-project">https://github.com/urbanopt/urbanopt-example-geojson-project</a></p>

<ul>
  <li>Check out to a short path (e.g. <code class="highlighter-rouge">C:\urbanopt-project</code>) to avoid problems with long file names on Windows</li>
  <li>Reference: <a href="https://ourcodeworld.com/articles/read/109/how-to-solve-filename-too-long-error-in-git-powershell-and-github-application-for-windows">https://ourcodeworld.com/articles/read/109/how-to-solve-filename-too-long-error-in-git-powershell-and-github-application-for-windows</a></li>
  <li>Solution: <code class="highlighter-rouge">git config --system core.longpaths true</code></li>
</ul>

<p>Run the following commands to execute the Rake tasks defined in the Rakefile of the current working directory.</p>

<ol>
  <li><code class="highlighter-rouge">bundle install</code></li>
  <li><code class="highlighter-rouge">bundle exec rake</code></li>
  <li><code class="highlighter-rouge">bundle update</code></li>
</ol>

<h3 id="run-example-project">Run example project</h3>

<p>To run specific rake tasks:</p>

<ul>
  <li><code class="highlighter-rouge">bundle exec rake &lt;name of the Rake task&gt;</code></li>
</ul>

<h3 id="overview-of-rake-tasks">Overview of Rake tasks</h3>

<h4 id="run_all">run_all</h4>

<p>In the Rake file methods are defined to create a Scenario CSV for each scenario, that take as arguments:</p>

<ul>
  <li>the <code class="highlighter-rouge">geojson</code> file (for example: <code class="highlighter-rouge">industry_denver.geojson</code>)</li>
  <li><code class="highlighter-rouge">mappers</code> folder (for example: <code class="highlighter-rouge">mappers</code>)</li>
  <li><code class="highlighter-rouge">csv</code> file (for example: <code class="highlighter-rouge">baseline_scenario.csv</code>)</li>
</ul>

<p>The run_all Rake task creates and runs a <code class="highlighter-rouge">ScenarioRunnerOSW</code> for each scenario passing the scenario method as an argument.</p>

<ul>
  <li><code class="highlighter-rouge">run_baseline</code>, <code class="highlighter-rouge">run_high_efficiency</code> and <code class="highlighter-rouge">run_mixed rake</code> tasks can be used for running individual scenarios.</li>
</ul>

<h4 id="post_process_all">post_process_all</h4>

<p>This rake task creates and runs <code class="highlighter-rouge">ScenarioDefaultPostProcessor</code> for each scenario and saves the results.</p>

<ul>
  <li><code class="highlighter-rouge">post_process_baseline</code>, <code class="highlighter-rouge">post_process_high_efficiency</code>, <code class="highlighter-rouge">post_process_mixed</code> rake tasks can be used for individual scenarios.</li>
</ul>

<h4 id="update_all">update_all</h4>

<p>This rake task combines the run_all and post_process_all tasks.</p>

<h4 id="default">default</h4>

<p>This runs the update_all rake task.</p>

<h4 id="clear_all">clear_all</h4>

<p>This rake task clears the scenario results from any previous runs.</p>

<ul>
  <li><code class="highlighter-rouge">clear_baseline</code>, <code class="highlighter-rouge">clear_high_efficiency</code>, <code class="highlighter-rouge">clear_mixed</code> rake tasks can be used for individual scenarios.</li>
</ul>

<h3 id="adding-your-own-measures-todo-is-this-how-you-create-a-new-buildingfeature">Adding your own measures TODO: Is this how you create a new building/feature?</h3>

<p>The <code class="highlighter-rouge">mappers</code> folder contains <code class="highlighter-rouge">baseline.osw</code> which serves as a simulation input for URBANopt. It is a workflow of OpenStudio measures and dictates the sequence of running the measures.<br />
Additional measures can be added to the workflow by adding the measure name and directory along with the measure arguments.</p>

<h3 id="modifying-mapper-classes">Modifying mapper classes</h3>

<p>The Simulation mapper class maps the features in the feature file to arguments required as simulation inputs in the <code class="highlighter-rouge">baseline.osw</code>.<br />
On adding additional measures to the <code class="highlighter-rouge">baseline.osw</code> file:</p>

<pre><code class="language-Ruby">OpenStudio::Extension.set_measure_argument
</code></pre>

<p>method should be used and the OpenStudio measure name and arguments and the corresponding feature from the feature file should be added as arguments.</p>

<h3 id="adding-a-custom-post-processor">Adding a custom post processor</h3>

<p>Scenario post process require feature reports to aggregate results from feature simulations. A reporting measure is used to query and report specific output data from an Openstudio simulation of each feature. The current default reporting measure is the “default_feature_reports” <strong>(add reference)</strong>. This measure writes a <code class="highlighter-rouge">default_feature_reports.json</code> file containing information on all features in the simulation. It also writes a <code class="highlighter-rouge">default_feature_reports.csv</code> containing timeseries data for all the features.</p>

<p>Users can create their own OpenStudio reporting measure to generate customized simulation reports. For example, users can request results for different reporting frequencies or query and report additional outputs that are important for their own projects; e.g. reporting specific construction costs. User can then add the new reporting measure to the openstudio <code class="highlighter-rouge">workflow.osw</code> file <strong>(add reference)</strong> and rerun the simulation.<br />
The <code class="highlighter-rouge">DefaultPostProcessor</code> reads these feature reports and aggregates them to create a <code class="highlighter-rouge">ScenarioReport</code>.</p>

<h2 id="advanced-usage">Advanced Usage</h2>

<ul>
  <li>
    <h3 id="geojson-docs"><a href="https://urbanopt.github.io/urbanopt-geojson-gem/">geoJSON docs</a></h3>
  </li>
  <li>
    <h3 id="geojson-github"><a href="https://github.com/urbanopt/urbanopt-geojson-gem">geoJSON github</a></h3>
  </li>
  <li>
    <h3 id="scenario-docs"><a href="https://urbanopt.github.io/urbanopt-scenario-gem/">Scenario docs</a></h3>
  </li>
  <li>
    <h3 id="scenario-github"><a href="https://github.com/urbanopt/urbanopt-scenario-gem">Scenario github</a></h3>
  </li>
</ul>

<p><a href="#welcome-to-urbanopt">Top</a></p>


      </section>
    </div>
    <footer>
    
      <p>Project maintained by <a href="https://github.com/urbanopt">urbanopt</a></p>
    
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    
  </body>
</html>
